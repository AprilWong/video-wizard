# Video Wizard

#### 制作个人视频

> 对输入的一个彩色视频与五张以上照片，用OpenCV实现以下功能或要求
> 
> 1. 命令行格式: “xxx.exe 放视频与照片的文件夹路径” ,（例如 MyMakeVideo.exe C:\input ）【假设该文件夹下面只有一个avi视频文件与若干jpg文件】
> 2. 将输入的视频与照片处理成同样长宽后，合在一起生成一个视频；
> 3. 这个新视频中，编程生成一个片头，然后按幻灯片形式播放这些输入照片，最后按视频原来速度播放输入的视频；

## 一、开发软件说明
### 开发环境
- Ubuntu 14.04
- cmake 2.8.12.2
- opencv 3.0

### 运行方式
- build project `make all`
- run `./video_wizard ./Resource`

## 二、算法具体步骤
#### 2.1 读入资源文件
- 根据输入的文件夹路径，读入资源文件（一个视频文件和若干图片文件）
- 视频文件必须是avi格式，图片文件jpg格式，无需指定图片数量
- 读入视频的一些参数，如height, width, fps, fourcc, framecount

#### 2.2 对每张图片进行放缩处理
- 根据视频文件的宽高比例，对每张图片进行放缩处理
- 放缩策略
	- 如果图片的宽高比大于视频的宽高比，则把图片按照宽度与视频宽度一样的等比例放缩
	- 如果图片的宽高比小于视频的宽高比，则把图片按照高度与视频高度一样的等比例放缩
	- 将图片的尺寸扩展为与视频尺寸一样，扩展部分填充黑色
	
#### 2.3 写入新的视频文件
- 将每一张图片打上字幕之后加入到新的视频文件中
- 将原视频的每一帧打上字幕后加入到新的视频文件中

## 三、算法实现要点
#### 3.1 读入资源文件

![](./pic/load.tiff)

#### 3.2 对每张图片进行放缩处理

![](./pic/resize.tiff)

#### 3.3 写入新的视频文件

![](./pic/write.tiff)

## 四、实验结果展示及分析
#### 4.1 原视频文件和图片文件

![](./pic/result1.tiff)

#### 4.2 处理之后的视频文件和图片文件

![](./pic/result2.tiff)

![](./pic/result3.tiff)
